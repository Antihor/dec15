{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/render.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchNews(query, currentPage) {\n  const BASE_URL = 'https://newsapi.org/v2';\n  const END_POINT = '/everything';\n  const API_KEY = '81088765cb514a5b98c190ea1c6dabf9';\n\n  const url = `${BASE_URL}${END_POINT}`;\n  const params = {\n    q: query,\n    apiKey: API_KEY,\n    language: 'en',\n    sortBy: 'relevancy',\n    pageSize: 10,\n    page: currentPage,\n  };\n\n  const resp = await axios.get(url, { params });\n  return resp.data;\n}\n","function templateArticle(article) {\n  const { urlToImage, title, author, publishedAt, description, sourse } =\n    article;\n  return `  <li class=\"card\">\n      <img src=\"${urlToImage}\" alt=\"${sourse}\" />\n      <h3>${title}</h3>\n      <h4>${description}</h4>\n      <p>${publishedAt}</p>\n      <p>${author}</p>\n    </li>`;\n}\n\nexport function templateArticles(articles) {\n  return articles.map(templateArticle).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchNews } from './js/api';\nimport { templateArticles } from './js/render';\n\nconst refs = {\n  form: document.querySelector('.js-form'),\n  list: document.querySelector('.js-list'),\n  more: document.querySelector('.js-more'),\n  loader: document.querySelector('.loader'),\n};\n\nlet query;\nlet page;\nlet lastPage;\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.more.addEventListener('click', onMore);\n\nasync function onSubmit(ev) {\n  ev.preventDefault();\n  page = 1;\n\n  query = ev.target.elements.query.value.trim();\n  if (!query) {\n    iziToast.warning({\n      title: 'Error!',\n      message: 'No query',\n      position: 'center',\n    });\n  }\n  refs.list.innerHTML = '';\n  showLoader();\n  const data = await fetchNews(query, page);\n  lastPage = Math.ceil(data.totalresults / 10);\n  hideLoader();\n  renderNews(data.articles);\n  checkMore();\n\n  ev.target.reset();\n}\n\nasync function onMore() {\n  page += 1;\n  const data = await fetchNews(query, page);\n  showLoader();\n  renderNews(data.articles);\n  hideLoader();\n  checkMore();\n  const height = refs.list.firstElementChild.getBoundingClientRect().height;\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 2,\n  });\n  refs.form.reset();\n}\n\nfunction renderNews(articles) {\n  const markup = templateArticles(articles);\n  refs.list.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showMore() {\n  refs.more.classList.remove('hidden');\n}\n\nfunction hideMore() {\n  refs.more.classList.add('hidden');\n}\n\nfunction checkMore() {\n  if (page >= lastPage) {\n    hideMore();\n  } else {\n    showMore();\n  }\n}\nfunction showLoader() {\n  refs.loader.classList.remove('hidden');\n}\nfunction hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n"],"names":["fetchNews","query","currentPage","BASE_URL","END_POINT","API_KEY","url","params","axios","templateArticle","article","urlToImage","title","author","publishedAt","description","sourse","templateArticles","articles","refs","page","lastPage","onSubmit","onMore","ev","iziToast","showLoader","data","hideLoader","renderNews","checkMore","height","markup","showMore","hideMore"],"mappings":"6vBAEO,eAAeA,EAAUC,EAAOC,EAAa,CAClD,MAAMC,EAAW,yBACXC,EAAY,cACZC,EAAU,mCAEVC,EAAM,GAAGH,CAAQ,GAAGC,CAAS,GAC7BG,EAAS,CACb,EAAGN,EACH,OAAQI,EACR,SAAU,KACV,OAAQ,YACR,SAAU,GACV,KAAMH,CACV,EAGE,OADa,MAAMM,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACd,CCnBA,SAASE,EAAgBC,EAAS,CAChC,KAAM,CAAE,WAAAC,EAAY,MAAAC,EAAO,OAAAC,EAAQ,YAAAC,EAAa,YAAAC,EAAa,OAAAC,CAAQ,EACnEN,EACF,MAAO;AAAA,kBACSC,CAAU,UAAUK,CAAM;AAAA,YAChCJ,CAAK;AAAA,YACLG,CAAW;AAAA,WACZD,CAAW;AAAA,WACXD,CAAM;AAAA,UAEjB,CAEO,SAASI,EAAiBC,EAAU,CACzC,OAAOA,EAAS,IAAIT,CAAe,EAAE,KAAK,EAAE,CAC9C,CCTA,MAAMU,EAAO,CACX,KAAM,SAAS,cAAc,UAAU,EACvC,KAAM,SAAS,cAAc,UAAU,EACvC,KAAM,SAAS,cAAc,UAAU,EACvC,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEA,IAAIlB,EACAmB,EACAC,EAEJF,EAAK,KAAK,iBAAiB,SAAUG,CAAQ,EAC7CH,EAAK,KAAK,iBAAiB,QAASI,CAAM,EAE1C,eAAeD,EAASE,EAAI,CAC1BA,EAAG,eAAc,EACjBJ,EAAO,EAEPnB,EAAQuB,EAAG,OAAO,SAAS,MAAM,MAAM,OAClCvB,GACHwB,EAAS,QAAQ,CACf,MAAO,SACP,QAAS,WACT,SAAU,QAChB,CAAK,EAEHN,EAAK,KAAK,UAAY,GACtBO,IACA,MAAMC,EAAO,MAAM3B,EAAUC,EAAOmB,CAAI,EACxCC,EAAW,KAAK,KAAKM,EAAK,aAAe,EAAE,EAC3CC,IACAC,EAAWF,EAAK,QAAQ,EACxBG,IAEAN,EAAG,OAAO,OACZ,CAEA,eAAeD,GAAS,CACtBH,GAAQ,EACR,MAAMO,EAAO,MAAM3B,EAAUC,EAAOmB,CAAI,EACxCM,IACAG,EAAWF,EAAK,QAAQ,EACxBC,IACAE,IACA,MAAMC,EAASZ,EAAK,KAAK,kBAAkB,sBAAuB,EAAC,OACnE,SAAS,CACP,SAAU,SACV,IAAKY,EAAS,CAClB,CAAG,EACDZ,EAAK,KAAK,OACZ,CAEA,SAASU,EAAWX,EAAU,CAC5B,MAAMc,EAASf,EAAiBC,CAAQ,EACxCC,EAAK,KAAK,mBAAmB,YAAaa,CAAM,CAClD,CAEA,SAASC,GAAW,CAClBd,EAAK,KAAK,UAAU,OAAO,QAAQ,CACrC,CAEA,SAASe,GAAW,CAClBf,EAAK,KAAK,UAAU,IAAI,QAAQ,CAClC,CAEA,SAASW,GAAY,CACfV,GAAQC,EACVa,IAEAD,GAEJ,CACA,SAASP,GAAa,CACpBP,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CACA,SAASS,GAAa,CACpBT,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC"}